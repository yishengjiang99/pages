<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terrapin Logo Emulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            user-select: none; /* Disable text selection */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE/Edge */
        }
        h1 {
            font-size: clamp(1.5rem, 5vw, 2rem);
            margin: 0.5em 0;
            text-align: center;
        }
        #turtleCanvas {
            border: 1px solid black;
            width: clamp(300px, 90vw, 500px);
            height: clamp(300px, 90vw, 500px);
            background-color: #fff;
        }
        #commandInput {
            width: clamp(280px, 88vw, 480px);
            height: 80px;
            margin: 0.5rem 0;
            font-size: 1rem;
            resize: none;
            padding: 0.5em;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            width: clamp(280px, 88vw, 480px);
            margin: 0.5rem 0;
        }
        button {
            padding: 0.5em;
            font-size: clamp(0.9rem, 3vw, 1rem);
            border: 1px solid #333;
            background-color: #e0e0e0;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #d0d0d0;
        }
        button:active {
            background-color: #c0c0c0;
        }
        .command-buttons button {
            background-color: #4CAF50;
            color: white;
        }
        .command-buttons button:hover {
            background-color: #45a049;
        }
        .number-buttons button {
            background-color: #2196F3;
            color: white;
        }
        .number-buttons button:hover {
            background-color: #1e88e5;
        }
        .run-button {
            background-color: #ff5722;
            color: white;
            font-weight: bold;
        }
        .run-button:hover {
            background-color: #e64a19;
        }
        @media (max-width: 600px) {
            .controls {
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
                gap: 0.3rem;
            }
            button {
                padding: 0.4em;
                font-size: clamp(0.8rem, 2.5vw, 0.9rem);
            }
        }
    </style>
</head>
<body>
    <h1>Terrapin Logo Emulator</h1>
    <canvas id="turtleCanvas"></canvas>
    <textarea id="commandInput" placeholder="Enter Logo commands or use buttons below"></textarea>
    <div class="controls command-buttons">
        <button onclick="appendCommand('FORWARD ')">FORWARD</button>
        <button onclick="appendCommand('BACK ')">BACK</button>
        <button onclick="appendCommand('RIGHT ')">RIGHT</button>
        <button onclick="appendCommand('LEFT ')">LEFT</button>
        <button onclick="appendCommand('PENUP')">PENUP</button>
        <button onclick="appendCommand('PENDOWN')">PENDOWN</button>
        <button onclick="appendCommand('CLEARSCREEN')">CLEARSCREEN</button>
        <button onclick="appendCommand('HOME')">HOME</button>
    </div>
    <div class="controls number-buttons">
        <button onclick="appendCommand('10')">10</button>
        <button onclick="appendCommand('50')">50</button>
        <button onclick="appendCommand('100')">100</button>
    </div>
    <div class="controls">
        <button class="run-button" onclick="runCommands()">Run Commands</button>
    </div>

    <script>
        // Get canvas and context
        const canvas = document.getElementById('turtleCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size dynamically
        const setCanvasSize = () => {
            const size = Math.min(window.innerWidth * 0.9, window.innerHeight * 0.5, 500);
            canvas.width = size;
            canvas.height = size;
            initCanvas();
        };

        // Turtle state
        let turtle = {
            x: 0,
            y: 0,
            angle: 0, // Facing up (0 degrees)
            penDown: true
        };

        // Initialize canvas
        function initCanvas() {
            turtle.x = canvas.width / 2;
            turtle.y = canvas.height / 2;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            turtle.angle = 0;
            turtle.penDown = true;
            drawTurtle();
        }

        // Draw turtle
        function drawTurtle() {
            ctx.save();
            ctx.translate(turtle.x, turtle.y);
            ctx.rotate((turtle.angle * Math.PI) / 180);
            ctx.fillStyle = 'green';
            ctx.beginPath();
            ctx.moveTo(0, -10);
            ctx.lineTo(-5, 5);
            ctx.lineTo(5, 5);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // Append command to textarea
        function appendCommand(cmd) {
            const input = document.getElementById('commandInput');
            input.value += cmd + ' ';
            input.focus();
        }

        // Parse and execute commands
        function runCommands() {
            const input = document.getElementById('commandInput').value.toUpperCase().trim();
            const commands = input.split('\n');

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            commands.forEach(command => {
                const tokens = command.trim().split(' ');
                const cmd = tokens[0];
                const arg = parseFloat(tokens[1]);

                switch (cmd) {
                    case 'FORWARD':
                    case 'FD':
                        moveTurtle(arg);
                        break;
                    case 'BACK':
                    case 'BK':
                        moveTurtle(-arg);
                        break;
                    case 'RIGHT':
                    case 'RT':
                        turtle.angle = (turtle.angle + arg) % 360;
                        break;
                    case 'LEFT':
                    case 'LT':
                        turtle.angle = (turtle.angle - arg) % 360;
                        break;
                    case 'PENUP':
                    case 'PU':
                        turtle.penDown = false;
                        break;
                    case 'PENDOWN':
                    case 'PD':
                        turtle.penDown = true;
                        break;
                    case 'CLEARSCREEN':
                    case 'CS':
                        initCanvas();
                        break;
                    case 'HOME':
                        turtle.x = canvas.width / 2;
                        turtle.y = canvas.height / 2;
                        turtle.angle = 0;
                        break;
                    default:
                        console.warn(`Unknown command: ${cmd}`);
                }
            });

            drawTurtle();
        }

        // Move turtle and draw line
        function moveTurtle(distance) {
            if (isNaN(distance)) return;
            const rad = (turtle.angle * Math.PI) / 180;
            const newX = turtle.x + distance * Math.cos(rad);
            const newY = turtle.y - distance * Math.sin(rad);

            if (turtle.penDown) {
                ctx.beginPath();
                ctx.moveTo(turtle.x, turtle.y);
                ctx.lineTo(newX, newY);
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 2;
                ctx.stroke();
            }

            turtle.x = newX;
            turtle.y = newY;
        }

        // Initialize and handle resize
        window.addEventListener('resize', setCanvasSize);
        setCanvasSize();
    </script>
</body>
</html>